{% extends 'base.html' %}

{% block content %}
<section>
    <h2>Publications</h2>
    <p>Total publications: {{ total_publications }} </p>
    <p> Publications with impact factor (IF): {{ total_publications_with_if }} </p>
    <p> Average impact factor (IF): {{ avg_if }}</p>
    <p>
        <a href = "https://scholar.google.com/citations?hl=en&user=n3LTk-UAAAAJ">Gscholar stats:</a> (updated at {{gscholar_stats.date_retrieval}}): 
        cited by {{gscholar_stats.citedby}} 
        | 
        h-index {{gscholar_stats.hindex}} 
        | 
        hindex5y {{gscholar_stats.hindex5y}}
    </p>    
    <ul class="item-list">
        {% for pub in publications %}
        <li class="item-card publication-item">
            <div class="publication-content">
                <h3><a href="{{ pub.link }}">{{ pub.title }}</a></h3>
                {% if pub.authors %}
                <p class="meta"><strong>{{ pub.authors }}</strong></p>
                {% endif %}
                <p class="meta">{{ pub.year }} | {{ pub.journal }} {% if pub.issn %}| ISSN: {{ pub.issn }} {% endif %}{%
                    if pub.impact_factor %} | IF: {{ pub.impact_factor
                    }}{% endif %}</p>
                {% if pub.abstract %}
                <p class="abstract">{{ pub.abstract }}</p>
                {% endif %}
            </div>
            {% if pub.image %}
            <div class="publication-image">
                <img src="{{ url_for('static', filename=pub.image.replace('static/', '')) }}" alt="Journal Cover">
            </div>
            {% endif %}
        </li>
        {% endfor %}
    </ul>
</section>
{% endblock %}